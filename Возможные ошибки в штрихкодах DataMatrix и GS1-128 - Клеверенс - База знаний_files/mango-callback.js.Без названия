"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function MangoWidget(e){function t(e){var t=e.styles.fastCallback||{},n=!e.styles.copyright;t.flags=R.flags,t.policy=e.styles.policy,"fast-callback"===e.workMode&&R.element.find(".widget-wrapper").first().hide(),j().done(function(){if(Mango.Callback.FastCallbackWidget.isFastCallbackAvailable()||"fast-callback"===e.workMode){R.fastCallback=new Mango.Callback.FastCallbackWidget(jQuery.parseJSON(e.fast_callback),t,e.translate,R.element),R.fastCallback.splitText=w,R.fastCallback.init(e.styles,n);var a=R.element;R.element=R.fastCallback.element,C(),(R.element.hasClass("dark-cerulean-color")||R.element.hasClass("graphite-black-color"))&&R.element.find(".widget-wrapper").hasClass("selected-button")&&R.element.find(".currentCountry>.selectedCountry .triangle").addClass("dark"),R.element=a,"fast-callback"===e.workMode&&R.fastCallback.showWidget()}})}function n(e){var t=R.element.find(".widget-wrapper");t.addClass("common-window"),R.element.hasClass("selected-label")&&R.element.css({right:"-545px"}),R.element.find(".widget-callfromsite").hide();var n=R.element.find(".widget-callfromsite-not-work");switch(e){case 1:case 2:n.find(".title-widget").text(""),n.find(".text-widget").text(H.translate.widget_call_error+" ("+e+")");break;case 3:n.find(".title-widget").text(""),n.find(".text-widget").text(H.translate.widget_not_supported);break;case 4:n.find(".title-widget").text(""),n.find(".text-widget").text(H.translate.widget_not_supported_flash)}R.widget_show_error=!0,n.show()}function a(e){try{if(!Mango||!Mango.SEO||!Mango.SEO.sendEvent)return;Mango.SEO.sendEvent(e)}catch(t){console.error("Exception in MangoWidget::sendSeoEvent",t)}}function o(e,t){O(e.widgetStatus)&&(S(),setTimeout(function(){f(e),t()},200)),N(document).on("click",function(e){var t=R.element.find(".changeCountry"),n=R.element.find(".currentCountry>.selectedCountry");0===R.element.find(".selectedCountry").has(e.target).length&&(t.css("display","none"),n.removeClass("showCountriesList"))}),R.element.on("click",".currentCountry .selectCountryList > .selectCountry",x),R.element.on("click",".button-call",function(e){var t=N(e.target),n=t.prev().find(".call-input"),o=n.parent().attr("data-content").split("(")[0].replace(/\+/g,"")+n.val(),i=t.hasClass("js-fast-callback");if(c(o,t),Mango&&Mango.SEO&&Mango.SEO.events){if(i)return void a(Mango.SEO.events.widget_leadgen_created);a(Mango.SEO.events.widget_callback_created)}}),R.element.on("click",".button-widget-open",function(){R.element.find(".widget-wrapper:not(.fast-callback)").hasClass("widget-show")?R.setStatus("close"):R.setStatus("open",e)}),R.element.on("change",".select-day-week",function(){N(".widget-start-time").html(h(N(this).val(),p(H.days))),N(".widget-end-time").html(h(N(this).val(),p(H.days)))}),R.element.on("click",".close-popup",function(e){var t=N(e.target),n=t.parents(".widget-wrapper");n.hasClass("fast-callback")?R.fastCallback.closeWidget():R.setStatus("close")})}function i(e,t){var n;switch(t){case 2:n=30;break;case 3:n=40;break;case 4:n=50;break;case 5:n=60;break;case 6:n=70}return e.animate({"padding-left":n+"px"},100).attr("data-padding",n),n}function r(e,t,n,a){var o=i(e,a),r=n.replace(/[\(\)\s\-]/g,"").length*t,l=null!==n.match(/[\(\)\s\-]/g)?n.match(/[\(\)\s\-]/g).length:0,s=0==l?0:r/(l*t)+5,c=r+l*s,d=parseInt(e.css("width"))+o+"px",u=o+c+"px";d!==u&&e.animate({width:u},100)}function l(){return"selected-dynamic"==H.styles.formatCall}function s(){var e=R.element.find(".call-input"),t=R.element.attr("data-number");!e.val()&&t&&(t=t.replace(/[()\-\+\s]/g,""),t.length>10&&(t=t.substr(t.length-10)),e.val(t),P&&P.maskPattern(P.opts.pattern))}function c(e,t){var n=t.parents(".widget-wrapper"),a=n.hasClass("fast-callback"),o=n.find(".currentCountry>.selectedCountry"),i=o.attr("data-index"),r=R.allowedCountries[i].phone_code.length;e=e.replace(/[()\-\s]/g,""),!R.type&&e.length-r>=R.allowedCountries[i].min&&R.allowedCountries[i].max>=e.length-r&&(l()&&"not-work"==H.workMode?A(g.bind(null,e,t)):g(e,t),a&&R.fastCallback.timerStage(),R.fastCallback&&R.fastCallback.orderComplete())}function d(e){if(H.useGaEvents){var t=window.GoogleAnalyticsObject;if(t){var n=window[t];if(n){var a="not-work"!=H.workMode?"call order work":"call order not work",o=n.getAll()||[];o.forEach(function(e){e.send("event","callback button","call order",""),e.send("event","callback button",a,"")})}}}}function u(e){if(void 0===window.atob)return"";if(!Mango||!Mango.modules||!Mango.modules.getModule)return"";var t=[],n=Mango.modules.getModule("calltracking");if(!n||!n.widgets)return"";t=n.widgets;var a=Object.keys(t);if(0===a.length)return"";var o=+atob(e),i=a.filter(function(e){var n=t[e];return n&&n.numbers&&n.numbers.length&&n.settings&&n.settings.callbacks&&n.settings.callbacks.some(function(e){return e===o})}).map(function(e){return{id:e,number:t[e].numbers[0].number}});if(0===i.length)return"";var r={uid:Mango.session.getUserId(),sid:Mango.session.getSessionId(),widgets:i};return JSON.stringify(r)}function g(e,t){var n=t.parents(".widget-wrapper").find(".widget-start-time").val()||0;R.setStatus("waiting");var a={number:encodeURIComponent(e),dateStart:parseInt(n)},o=u(R.callbackButtonId);o&&(a.calltracking=o);var i=R.host+"widget/order-call/"+R.callbackButtonId+"?callback=?";return N.getJSON(i,a,function(t){R.setStatus("success"),d(e)})}function h(e,t){var n="";return N.each(t,function(t,a){a.date==e&&N.each(a.times,function(e,t){var a=new Date(1e3*t),o=new Date(1e3*t+18e5),i=("0"+a.getHours()).substr(-2),r=("0"+a.getMinutes()).substr(-2),l=("0"+o.getHours()).substr(-2),s=("0"+o.getMinutes()).substr(-2);n+='<option value="'+t+'">'+i+":"+r+" - "+l+":"+s+"</option>"})}),n}function p(e){var t=[],n=new Date;return N.each(e,function(e,a){var o=[],i=new Date(1e3*a.date+6e4*n.getTimezoneOffset());N.each(a.times,function(e,t){var a=new Date(1e3*t+18e5);i.setHours(a.getHours()),i.setMinutes(a.getMinutes()),i>=n&&o.push(t)}),o.length>0&&t.push({date:a.date,times:o})}),t}function m(e){function t(e,t){var n=new Date(1e3*t.date+6e4*i.getTimezoneOffset());o+='<option value="'+t.date+'">'+n.getDate()+" "+H.translate["month_"+(n.getMonth()+1)]+"</option>"}function n(e){var t,n=new Date,a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];return n.setDate(i.getDate()+1),e.toDateString()==i.toDateString()?H.translate.today:n.toDateString()==e.toDateString()?H.translate.tomorrow:(t=a[e.getDay()],t="in_"+t.toLowerCase().trim(),H.translate[t])}function a(e,t){var a=new Date(1e3*t.date+6e4*i.getTimezoneOffset()),r=n(a);o+='<option value="'+t.date+'">'+r}var o="",i=new Date;return"work"==H.workMode?N.each(e,t):N.each(e,a),o}function f(e){function t(){if(!n.formatView){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;E.css("top",Math.max(0,(e-N(E).outerHeight())/2)+"px")}if(!n.formatLocation){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;E.css("left",Math.max(0,(t-N(E).outerWidth())/2)+"px")}}var n=N.extend({},e.styles),a=p(e.days);if(window.location.search)for(var o=window.location.search.substring(1).split("&"),i=0;i<o.length;i++){var r=o[i].split("=");if("type"===r[0]){n.workMode=r[1];break}}var s="",c=m(a);a[0]&&(s=h(a[0].date,a)),void 0===n.pattern&&(n.pattern={}),"string"==typeof n.pattern?n.pattern={pattern:n.pattern}:"object"==typeof n.pattern&&void 0===n.pattern.pattern&&(n.pattern.pattern=""),l()&&(n.formatCall="selected-label",n.formatLocation||(n.formatLocation="right-x"));var d={basicColor:n.colorScheme.basic+"-color",additionalColor:n.colorScheme.additional+"-additional-color ",opacity:n.colorScheme.opacity},u=["widget-wrapper","mng-wgt","common-window","mng-wgt-index",n.copyright||"",n.formatView||"",n.formatLocation||"",d.basicColor||"",d.additionalColor||"",d.opacity||"",n.formWidget||"",n.pattern.pattern||"",n.formatCall||""].join(" "),g='<div class="'+u+'" style="position:fixed;"><div class="widget-wrapper__center"><div class="widget-content">',f=R.currentCountry,w="",y='<ul class="currentCountry">';f["default"]?R.allowedCountries.length>0?(y+='<li class="selectedCountry" data-country="'+R.allowedCountries[0].country_code+'" data-index="'+(f.ind||0)+'"><div class="triangle"></div><img class="flag flag-'+R.allowedCountries[0].country_code+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',w+='<span class="box-phone-span-input '+R.allowedCountries[0].country_code+'-box-phone-span-input" data-content="+'+R.allowedCountries[0].phone_code+'"><input placeholder="'+R.allowedCountries[0].placeholder+'" class="call-input" mask="'+R.allowedCountries[0].mask+'" restrict="reject" clean="true"/></span>'):(y+='<li class="selectedCountry" data-country="'+e.locale+'" data-index="0"><img class="flag flag-'+e.locale+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',w+='<span class="box-phone-span-input '+e.locale+'-box-phone-span-input" data-content="+'+f.phone_code+'"><input placeholder="'+f.placeholder+'" class="call-input" mask="'+f.mask+'" restrict="reject" clean="true"/></span>'):(y+='<li class="selectedCountry" data-country="'+e.locale+'" data-index="'+(f.ind||0)+'">'+(R.allowedCountries.length>0?'<div class="triangle"></div>':"")+'<img class="flag flag-'+e.locale+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></li>',w+='<span class="box-phone-span-input '+e.locale+'-box-phone-span-input" data-content="+'+f.phone_code+'"><input placeholder="'+f.placeholder+'" class="call-input" mask="'+f.mask+'" restrict="reject" clean="true"/></span>'),y+='<li class="changeCountry"><ul class="selectCountryList">',f["default"]||(y+='<li class="selectCountry userCountry" data-country="'+f.country_code+'" data-code="+'+f.phone_code+'" data-mask="'+f.mask+'" data-placeholder="'+f.placeholder+'" data-index="'+f.ind+'"><div class="selectCountryTable"><div class="selectCountryTableCell"><img class="flag flag-'+f.country_code+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></div><div class="countryName">'+("de"===e.locale?f.country_de:"ru"===e.locale?f.country_ru:f.country_en)+'</div><div class="countryCode">+'+f.phone_code+"</div></div></li>");for(var v=0;v<R.allowedCountries.length;v++){var b=R.allowedCountries[v].country_code,k=R.allowedCountries[v].phone_code,A=R.allowedCountries[v].mask,x=R.allowedCountries[v].placeholder;y+='<li class="selectCountry" data-country="'+b+'" data-code="+'+k+'" data-mask="'+A+'" data-placeholder="'+x+'" data-index="'+v+'"><div class="selectCountryTable"><div class="selectCountryTableCell"><img class="flag flag-'+b+'" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"/></div><div class="countryName">'+("de"===e.locale?R.allowedCountries[v].country_de:"ru"===e.locale?R.allowedCountries[v].country_ru:R.allowedCountries[v].country_en)+'</div><div class="countryCode">+'+k+"</div></div></li>"}y+="</ul></li></ul>",y+=w,n.workMode&&"not-work"===n.workMode||!n.workMode&&"not-work"===e.workMode?(g+='<h5 class="title-widget">'+n.textWidget.firstText+'</h5><p class="text-widget">'+n.textWidget.secondText+'</p><div class="box-select-group"><div class="select-list"><div class="select-item"><select class="select-day-week">'+c+'</select></div><div class="select-item"><select class="select-time widget-start-time">'+s+'</select></div></div></div><div class="box-phone-number">'+y+'<div class="button-call button-widget"></div></div>',""===n.policy&&(g+='<div class="'+("selected-dynamic"!==H.styles.formatCall?"text-policy":"text-policy-dynamic")+'">'+n.textWidget.policyText+"</div>")):(g+='<h5 class="title-widget">'+n.textWidget.workTitle+'</h5><p class="text-widget">'+n.textWidget.workText+'</p><div class="box-phone-number">'+y+'<div class="button-call button-widget"></div></div>',""===n.policy&&(g+='<div class="'+("selected-dynamic"!==H.styles.formatCall?"text-policy":"text-policy-dynamic")+'">'+n.textWidget.policyText+"</div>")),R.flags=y,g+="</div>",g+='<div class="thanks-content"><h5 class="title-widget">'+e.translate.thanks+'</h5><p class="text-widget">'+e.translate.order_complete+'</p></div><div class="wait-content"><div class="clock"></div><h5 class="title-widget">'+e.translate.wait+'</h5><p class="text-widget">'+e.translate.order_waiting+"</p></div>",g+='</div><div class="close-popup"></div><button class="button-widget-open">'+n.textButtonWidget.firstText+'</button><a href="'+e.translate.widget_link_url+'" class="technology" target="_blank">'+e.translate.widget_link_text+"</a></div>";var M=R.element.find(".mng-overlay");if(0==M.length&&(g+='<div class="mng-overlay"></div>'),R.element.find(".widget-wrapper").remove(),R.element.append(g),navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1){var E=N("#mango-widget").find(".widget-wrapper");N(function(){N(window).resize(function(){t()}),setTimeout(function(){E.css("-webkit-transform","translate(0,0)"),t()},300)})}switch(e.workMode){case"work":R.element.find(".widget-callfromsite").show();break;default:R.element.find(".widget-wrapper").addClass("common-window"),R.element.find(".widget-callback-not-work").show()}C(e),l()&&_(e)}function w(e,t){void 0===t&&(t=5);var n,a=e.length,o=13;return a<o?e:(e=e.replace("<br>"," "),n=e.indexOf(" ",Math.ceil(a/2)-t),e.substring(0,n)+"<br>"+e.substring(n+1,a))}function y(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return!(!n||11!=n[7].length)&&n[7]}function v(e){function t(e,t){"undefined"!=typeof YT&&(Y[e]=new YT.Player(e,{videoId:t,playerVars:{loop:1,autoplay:1,autohide:1,controls:0,showinfo:0,disablekb:1,modestbranding:1,rel:0,cc_load_policy:1,iv_load_policy:3},events:{onReady:function(t){t.target.mute(),R.element.find(".widget-show").length&&b(Y[e]),t.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.ENDED&&e.target.playVideo()}}}))}function n(){Object.keys(Y).length?Object.keys(Y).forEach(function(t){Y[t].loadVideoById(e)}):(t("mango-video-container",e),t("mango-video-thanks-container",e),t("mango-video-wait-container",e))}var a=document.createElement("script"),o=document.getElementsByTagName("script")[0];R.element.find(".widget-wrapper");a.id="youtube-api",a.src="https://www.youtube.com/player_api",e&&(document.getElementById(a.id)||o.parentNode.insertBefore(a,o),U=function(e){setTimeout(function(){Object.keys(Y).forEach(function(e){b(Y[e])})},e||100)},N(window).resize(U),window.onYouTubeIframeAPIReady!=n?window.onYouTubeIframeAPIReady=n:n())}function b(e){var t=e.getIframe();if(t){var n=t.parentNode,a=n.offsetWidth,o=n.offsetHeight,i=16/9,r=Math.round(a/i),l=Math.round(o*i),s=-Math.round(r/2-o/2);o>a&&(t.style.width=l+"px",t.style.height=o+"px",s=-Math.round(l/2-a/2),t.style.marginLeft=s+"px",t.style.marginTop="0px"),o<=a&&s>=0&&(t.style.height=o+"px",t.style.width=a+"px",t.style.marginTop="0px",t.style.marginLeft="0px"),o<=a&&s<0&&(t.style.width=a+"px",t.style.height=r+"px",t.style.marginTop=s+"px",t.style.marginLeft="0px")}}function k(){return"not-work"!=H.workMode}function _(e){function t(){var e=A.date,t=A.time.split("-"),n=t[0].trim(),a=t[1].trim(),o=H.translate.dynamic_button_thank_you_not_work;return o.replace("{timeStart}",n).replace("{timeEnd}",a).replace("{date}",e)}function n(){var e=N("body");if(!i.hasClass("widget-show")||e.width()>650)return void i.css("top","auto");var t=N(window).height()>window.screen.height?window.screen.height:N(window).height(),n=Math.round(t/2);i.css("top",n+"px")}function a(){H.styles.pattern.useVideo&&0===Object.keys(Y).length?v(y(H.styles.pattern.linkVideo)):H.styles.pattern.useVideo&&Object.keys(Y).length&&Object.keys(Y).forEach(function(e){Y[e].playVideo()})}function o(){Object.keys(Y).forEach(function(e){Y[e].stopVideo()})}var i=R.element.find(".widget-wrapper"),r=N.extend({},e.styles),s=i.find(".widget-content"),c=i.find(".thanks-content"),d=i.find(".wait-content"),u=0===location.pathname.indexOf("/widget/callback/");u&&"?type=work"==location.search?H.workMode="work":u&&"?type=not-work"==location.search&&(H.workMode="not-work"),void 0===r.textDynamicWidget&&(r.textDynamicWidget={}),void 0===r.textNotWorkingDynamicWidget&&(r.textNotWorkingDynamicWidget={});var g=r.textDynamicWidget.firstText||"",h=r.textNotWorkingDynamicWidget.firstText||"",p=r.textDynamicWidget.secondText||"",m=r.textDynamicWidget.thirdText||H.translate.dynamic_button_header;i.removeClass("selected-label").addClass("selected-dynamic"),i.find(".button-widget-open").text(""),s.find(".title-widget").text(m),s.find(".text-widget").html(w(k()?g:h)),s.find(".box-select-group").hide(),c.find(".text-widget").text(e.translate.dynamic_button_thank_you),i.find(".button-call").text(p),R.element.find(".mng-overlay").hide(),i.find(".call-input").height(35),r.pattern&&r.pattern.linkVideo&&r.pattern.useVideo&&(s.prepend('<div class="background-video"><div id="mango-video-container"></div></div>'),c.prepend('<div class="background-video"><div id="mango-video-thanks-container"></div></div>'),d.prepend('<div class="background-video"><div id="mango-video-wait-container"></div></div>')),N(window).resize(n),R.element.on("statusChange",function(e,r){l()&&(U(),n(),i.hasClass("thanks")&&"close"==r&&i.removeClass("thanks"),"success"!=r||k()||c.find(".text-widget").text(t()),"open"==r&&a(),"close"==r&&o())})}function A(e){var t=R.element.find(".widget-wrapper:not(fast-callback) .button-call"),n=R.element.find(".box-select-group"),a=R.element.find(".box-phone-number");return n.is(":visible")?void e():(t.text(H.translate.dynamic_button_not_work_button),n.css("display","inline-block"),R.element.find(".widget-content .widget-text").text(H.translate.dynamic_button_not_work_text),a.find(".box-phone-span-input").hide(),a.find(".currentCountry").hide(),U(),void t.off().on("click",function(){var t=R.element.find(".select-day-week option:selected").text(),n=R.element.find(".select-time option:selected").text();A.date=t,A.time=n,e()}))}function C(e){var t,n;R.currentCountry["default"]&&R.allowedCountries.length>0?(t={mask:R.allowedCountries[0].mask.replace(/\?/g,""),placeHolder:R.allowedCountries[0].placeholder},n=R.allowedCountries[0].phone_code.length+1):(t={mask:R.currentCountry.mask.replace(/\?/g,""),placeHolder:R.currentCountry.placeholder},n=R.currentCountry.phone_code.length+1);var a=R.element.find(".call-input"),o=11.2;P=VMasker(a[0]),P.maskPattern(t.mask),a.attr("placeholder",t.placeHolder),r(a,o,t.placeHolder,n),(R.element.find(".widget-wrapper").hasClass("dark-cerulean-color")||R.element.find(".widget-wrapper").hasClass("graphite-black-color"))&&R.element.find(".widget-wrapper").hasClass("selected-button")&&R.element.find(".currentCountry>.selectedCountry .triangle").addClass("dark"),R.allowedCountries.length>1?R.element.find(".selectedCountry").on("click",function(e){var t=e.currentTarget;t.classList.toggle("showCountriesList");var n=t.parentElement.getElementsByClassName("changeCountry")[0].style;t.classList.contains("showCountriesList")?(n.display="block",R.allowedCountries.length<5&&(n.height=31*R.allowedCountries.length+"px")):n.display="none"}):R.element.find(".currentCountry>.selectedCountry>.triangle").css("display","none")}function x(e){var t=11.2,n=N(e.target),a=n.parents(".widget-wrapper"),o=n.hasClass("selectCountry")?n:n.parents(".selectCountry"),i=o.parents(".box-phone-number"),l=i.find(".call-input"),s=i.find(".selectedCountry"),c=s.find("img"),d=o.parents(".changeCountry"),u=o.attr("data-code"),g=o.attr("data-placeholder"),h=o.attr("data-index"),p=o.attr("data-country");r(l,t,g,u.length),c.removeClass("flag-"+s.attr("data-country")),s.attr("data-country",p),s.attr("data-index",h),c.addClass("flag-"+p),a.find(".box-phone-span-input").attr("data-content",u),l.val(""),l.attr("mask",o.attr("data-mask"));var m={mask:o.attr("data-mask").replace(/\?/g,""),placeHolder:o.attr("data-placeholder")};P=VMasker(l[0]),P.maskPattern(m.mask),l.attr("placeholder",m.placeHolder),d.css("display","none"),s.removeClass("showCountriesList"),U(200)}function M(e){var t=new Date,n=t.toISOString().substring(0,10),a=e.nonWorkingDaysException||[];if(-1!==a.indexOf(n))return!1;var o=new Date(e.workInterval.start),i=new Date(e.workInterval.finish),r=e.workInterval.lunchStart?new Date(e.workInterval.lunchStart):null,l=e.workInterval.lunchFinish?new Date(e.workInterval.lunchFinish):null;return r&&l?o<=t&&t<i&&!(r<=t&&t<l):o<=t&&t<i}function E(e){var t=M(e);return"work"!==e.workMode||t?!("not-work"!==e.workMode||!t)&&(e.workMode="work",!0):(e.workMode="not-work",!0)}function S(){N("<link>",{rel:"stylesheet",type:"text/css",href:R.host+"css/widget.css"}).appendTo("head"),N("<link>",{rel:"stylesheet",type:"text/css",href:R.host+"css/flags.css"}).appendTo("head")}function O(e){switch(e){case 1:case 2:return R.element.find("#mango-widget-btn").attr("onclick",'alert("'+H.translate.widget_unavailable+'"); false;'),!1;case 3:return B(),!1}return!0}function T(e){void 0===window.VMasker?W("js/vanilla-masker.js",function(){e()}):e()}function j(e){var e=e||"widgets/mango-fast-callback.js",t=document.createElement("script"),n=N.Deferred();return t.setAttribute("type","text/javascript"),t.setAttribute("src",R.host+e),t.onerror=n.reject.bind(n),t.onload=n.resolve.bind(n),(document.getElementById(R.id)||document.documentElement).appendChild(t),n=n.promise(),n.fail(function(){B()}),n}function D(e){function t(e,t){if(e==t)return 0;for(var n=e.split("."),a=t.split("."),o=Math.min(n.length,a.length),i=0;i<o;i++){if(parseInt(n[i])>parseInt(a[i]))return 1;if(parseInt(n[i])<parseInt(a[i]))return-1}return n.length>a.length?1:n.length<a.length?-1:0}function n(e){var n;return"function"==typeof e&&(n=e(),"object"==typeof n&&void 0!==n.jquery&&t(n.jquery,z)>=0)}if(void 0===window.jQuery){var a=window.$;W("js/jquery-1.7.2.js",function(){N=window.jQuery.noConflict(),window.$=a,(window.Mango=window.Mango||{}).jQuery=N,e()})}else if(n(window.jQuery))N=window.jQuery,(window.Mango=window.Mango||{}).jQuery=N,e();else{var o=window.jQuery.noConflict();W("js/jquery-1.7.2.js",function(){N=window.jQuery.noConflict(),window.jQuery=window.$=o,(window.Mango=window.Mango||{}).jQuery=N,e()})}}function I(e){void 0===N.Storage?W("js/jquery.storage.js",function(){N.Storage=window.jQuery.Storage,e()}):e()}function W(e,t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",R.host+e),n.readyState?n.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||t()}:(n.onload=t,n.onerror=B),(document.getElementById(R.id)||document.documentElement).appendChild(n)}function B(e){e=!(!e&&"object"==typeof e)&&e;var t="";e&&(t="("+e+")"),R.element?R.element.find(".button-widget-open").attr("onclick",'alert("'+R.errorMessage+t+'"); false;'):R.elem.querySelector(".button-widget-open").setAttribute("onclick",'alert("'+R.errorMessage+t+'"); false;')}function L(){return window.location.href.indexOf("autoOpen=1")>0}this.host=e.host,this.id=e.id,this.elem=e.elem,this.errorMessage=e.message,this.callbackButtonId=!1,this.type="",this.allowedCountries=[],this.currentCountry=[],this.fastCallback=null,this.closeTimeout=null,this.autoCloseTimeout=null,this.widget_show_error=!1,this.connection=!1;var N,H,P,R=this,V=!1,Q=6e4,G=5e3,z="1.7.2",Y={};this.initWidget=function(){D(function(){T(function(){I(function(){R.elem?R.element=N(R.elem):R.element=N("#"+R.id);var e=R.element.data("settings");R.callbackButtonId=e.id;var n=new Date,a=R.host+"widget/get-callback-widget/"+e.id+"?callback=?&timeOffset="+n.getTimezoneOffset()+"&type="+e.type+"&serv="+e.srv;N.support.cors=!0,N.getJSON(a,e,function(n){H=n,n.widget_id=e.id;var a=R.element.attr("data-optionsView");a&&(n.styles=jQuery.parseJSON(a)),R.currentCountry=n.currentCountry,R.allowedCountries=n.allowedCountries,o(n,function(){V=!0,(e.type||L())&&R.setStatus("open",n),R.type=e.type||null,(n.use_tracking||"fast-callback"==n.workMode)&&t(n)})})})})})},this.setStatus=function(e,t){if(!R.type&&V){var a=R.element.find(".widget-wrapper:not(.fast-callback)"),o=R.element.find(".widget-wrapper.fast-callback.widget-show");switch(e){case"open":!a.hasClass("widget-show")&&E(t)&&(f(t),a=R.element.find(".widget-wrapper")),setTimeout(function(){a.toggleClass("widget-show"),a.removeClass("thanks"),a.removeClass("wait"),a.hasClass("widget-show")&&a.hasClass("selected-button")&&R.element.find(".mng-overlay").show().animate({opacity:"0.5"},500)},0),R.autoCloseTimeout=setTimeout(function(){R.setStatus("close")},Q),s();break;case"success":a.addClass("thanks"),a.removeClass("wait"),R.closeTimeout=setTimeout(function(){R.setStatus("close"),o||R.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1)},G);break;case"close":a.removeClass("widget-show"),clearTimeout(R.closeTimeout),clearTimeout(R.autoCloseTimeout),R.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1);break;case"waiting":a.addClass("wait"),a.removeClass("thanks");break;case"connection-failed":n(1),R.element.find(".mng-overlay").animate({opacity:"0"},500).hide(1)}setTimeout(function(){R.element.trigger("statusChange",[e])},0)}};var U=function(){}}!function(e,t,n){n.$,n._,n.Promise;n.SEO=n.SEO||{},n.SEO.events={mch_chat_established:"mch_chat_established",mch_chat_created:"mch_chat_created",mch_chat_propose:"mch_chat_propose",mch_proactivechat_shown:"mch_proactivechat_shown",mch_proactivechat_created:"mch_proactivechat_created",mch_proactivechat_established:"mch_proactivechat_established",mch_callback_created:"mch_callback_created",mch_callback_established:"mch_callback_established",mch_callback_lead:"mch_callback_lead",mch_leadgen_shown:"mch_leadgen_shown",mch_leadgen_created:"mch_leadgen_created",mch_leadgen_established:"mch_leadgen_established",widget_callback_created:"widget_callback_created",widget_callback_established:"widget_callback_established",widget_leadgen_shown:"widget_leadgen_shown",widget_leadgen_created:"widget_leadgen_created"},n.SEO.Yandex=function(){function t(t){try{var n=e.ym;if(!n||!n.a)return;var a=n.a.map(function(e){return e[0]}),o=[].concat(_toConsumableArray(new Set(a)));o.forEach(function(e){return n(e,"reachGoal",t)})}catch(i){console.error("Error in Yandex.Metrica")}}return{reachGoal:t}}(),n.SEO.Google=function(){function t(t){try{console.log("Mango.SEO.Google::sendEvent name: "+t);var a=n[t];if(!a)return;var o=a.action,i=a.category,r=e.GoogleAnalyticsObject;if(!r)return;var l=e[r];if(!l||!l.getAll)return;var s=l.getAll()||[];s.forEach(function(e){e.send({hitType:"event",eventCategory:i,eventAction:o})})}catch(c){console.error("Error in Google Analytics")}}var n={mch_chat_established:{category:"mch_chat",action:"established"},mch_chat_created:{category:"mch_chat",action:"created"},mch_chat_propose:{category:"mch_chat",action:"propose"},mch_callback_created:{category:"mch_callback",action:"created"},mch_callback_established:{category:"mch_callback",action:"established"},mch_callback_lead:{category:"mch_callback",action:"lead"},mch_leadgen_shown:{category:"mch_leadgen",action:"shown"},mch_leadgen_created:{category:"mch_leadgen",action:"created"},mch_leadgen_established:{category:"mch_leadgen",action:"established"},mch_proactivechat_shown:{category:"mch_proactivechat",action:"shown"},mch_proactivechat_created:{category:"mch_proactivechat",action:"created"},mch_proactivechat_established:{category:"mch_proactivechat",action:"established"},widget_callback_created:{category:"widget_callback",action:"created"},widget_callback_established:{category:"widget_callback",action:"established"},widget_leadgen_shown:{category:"widget_leadgen",action:"shown"},widget_leadgen_created:{category:"widget_leadgen",action:"created"}};return{sendEvent:t}}(),n.SEO.sendEvent=function(e){n.SEO.Yandex&&n.SEO.Yandex.reachGoal(e),n.SEO.Google&&n.SEO.Google.sendEvent(e)}}(window,document,window.Mango=window.Mango||{}),function(e,t){e.VMasker=t()}(this,function(){var e="9",t="A",n="S",a=[9,16,17,18,36,37,38,39,40,91,92,93],o=function(e){for(var t=0,n=a.length;t<n;t++)if(e==a[t])return!1;return!0},i=function(e){return e=e||{},e={precision:e.hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput},e.moneyPrecision=e.zeroCents?0:e.precision,e},r=function(a,o,i){for(;o<a.length;o++)a[o]!==e&&a[o]!==t&&a[o]!==n||(a[o]=i);return a},l=function(e){this.elements=e};l.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;e<t;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},l.prototype.bindElementToMask=function(e){for(var t=this,n=function(n){n=n||window.event;var a=n.target||n.srcElement;o(n.keyCode)&&setTimeout(function(){t.opts.lastOutput=a.lastOutput,a.value=s[e](a.value,t.opts),a.lastOutput=a.value,a.setSelectionRange&&t.opts.suffixUnit&&a.setSelectionRange(a.value.length,a.value.length-t.opts.suffixUnit.length)},0)},a=0,i=this.elements.length;a<i;a++)this.elements[a].lastOutput="",this.elements[a].onkeyup=n,this.elements[a].value.length&&(this.elements[a].value=s[e](this.elements[a].value,this.opts))},l.prototype.maskMoney=function(e){this.opts=i(e),this.bindElementToMask("toMoney")},l.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},l.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},l.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},l.prototype.unMask=function(){this.unbindElementToMask()};var s=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new l(t)};return s.toMoney=function(e,t){if(t=i(t),t.zeroCents){t.lastOutput=t.lastOutput||"";var n="("+t.separator+"[0]{0,"+t.precision+"})",a=new RegExp(n,"g"),o=e.toString().replace(/[\D]/g,"").length||0,r=t.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(a,""),o<r&&(e=e.slice(0,e.length-1))}var l=e.toString().replace(/[\D]/g,""),s=new RegExp("^(0|\\"+t.delimiter+")"),c=new RegExp("(\\"+t.separator+")$"),d=l.substr(0,l.length-t.moneyPrecision),u=d.substr(0,d.length%3),g=new Array(t.precision+1).join("0");d=d.substr(d.length%3,d.length);for(var h=0,p=d.length;h<p;h++)h%3===0&&(u+=t.delimiter),u+=d[h];if(u=u.replace(s,""),u=u.length?u:"0",!t.zeroCents){var m=l.length-t.precision,f=l.substr(m,t.precision),w=f.length,y=t.precision>w?t.precision:w;g=(g+f).slice(-y)}var v=t.unit+u+t.separator+g+t.suffixUnit;return v.replace(c,"")},s.toPattern=function(a,o){var i,l="object"==typeof o?o.pattern:o,s=l.replace(/\W/g,""),c=l.split(""),d=a.toString().replace(/\W/g,""),u=d.replace(/\W/g,""),g=0,h=c.length,p="object"==typeof o?o.placeholder:void 0;for(i=0;i<h;i++){if(g>=d.length){if(s.length==u.length)return c.join("");if(void 0!==p&&s.length>u.length)return r(c,i,p).join("");break}if(c[i]===e&&d[g].match(/[0-9]/)||c[i]===t&&d[g].match(/[a-zA-Z]/)||c[i]===n&&d[g].match(/[0-9a-zA-Z]/))c[i]=d[g++];else if(c[i]===e||c[i]===t||c[i]===n)return void 0!==p?r(c,i,p).join(""):c.slice(0,i).join("")}return c.join("").substr(0,i)},s.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},s.toAlphaNumeric=function(e){return e.toString().replace(/[^a-z0-9 ]+/i,"")},s});